@model JobManagement.WebMvc.Models.Vendor.IndexVendorModel
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_SpaceLayout.cshtml";
}
<ol class="breadcrumb">
    <li>Home</li>
    <li class="active">Fornitori</li>
</ol>
<div class="container-fluid">
    <form method="get" id="filterForm" name="filterForm">
        <div class="form-inline">
            Nome: <input id="filterName" name="filterName" type="text" class="form-control" value="@Html.Raw((string.IsNullOrWhiteSpace(Model.filterName) ? string.Empty : Model.filterName))" /> Stato: <select id="filterStatus" name="filterStatus" class="form-control"><option value="0" @Html.Raw((Model.filterStatus == "0" ? "selected" : string.Empty))>ATTIVI</option><option value="1" @Html.Raw((Model.filterStatus == "1" ? "selected" : string.Empty))>ARCHIVIATI</option><option value="999" @Html.Raw((Model.filterStatus == "999" ? "selected" : string.Empty))>TUTTI</option></select> <button id="filterButton" name="filterButton" class="btn btn-default" onclick="document.getElementById('filterForm').submit();"><span class="glyphicon glyphicon-filter" aria-hidden="true"></span> Filtra</button>
        </div>
    </form>
    <ol class="list-inline margin-top-06">
        <li><button type="button" class="btn btn-sm" data-id="-1" onclick="edit_vendor(this);" value="Filter"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Nuovo ...</button></li>
    </ol>
    <div class="row">
        <div class="col-md-12">
            <table class="table table-striped">
                <thead>
                    <tr><th rowspan="2" colspan="2" style="text-align:center;">Id</th><th rowspan="2" style="text-align:left;">Nome</th><th rowspan="2">Partita IVA</th></tr>
                </thead>
                <tbody>
                    @foreach (var v in Model.VendorList)
                    {
                        <tr><td style="width:32px;"><button type="button" class="btn-xs btn-default" data-id="@Html.Raw(v.VendorId.ToString())" onclick="edit_vendor(this);"><span class="glyphicon glyphicon-edit"></span></button></td><td style="width:64px;text-align:right;padding-left:12px;padding-right:8px;@Html.Raw((v.Status == JobManagement.EFDataModel.Vendors.STATUS_ARCHIVED ? "color:#FF0000;" : string.Empty))">@Html.Raw(v.VendorId.ToString().PadLeft(6, '0'))</td><td>@Html.Raw(v.FullName)</td><td>@Html.Raw(v.VATNumber)</td></tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>

@section sectionScripts {
    <script type="text/javascript">
        $(function () {
            $('#filterName').val(null);
            $('#filterStatus').val("1");
            var fn = zzsGetUrlVar('filterName');
            var fs = zzsGetUrlVar('filterStatus');
            if (fn != null) {
                if (fn.trim() != '') {
                    $('#filterName').val(fn);
                }
            }
            if (fs != null) {
                if (fs.trim() != '') {
                    $('#filterStatus').val(fs);
                }
            }
        });
        function edit_vendor(btn) {
            var id = btn.getAttribute("data-id");
            if (id != null) {
                if (id.trim() == '') {
                    id = null;
                }
            }
            if (id != null) {
                $('#modal-placeholder').load('@Url.Content("~/Vendor/ModalEdit")/' + id);
            } else {
                $('#modal-placeholder').load('@Url.Content("~/Vendor/ModalEdit")');
            }
        }
    </script>
}




