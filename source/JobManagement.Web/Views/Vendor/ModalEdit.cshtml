@model JobManagement.WebMvc.Models.Vendor.ModalEditVendorModel

<script type="text/javascript">
    $(function () {
        $('#dialogEditVendor').modal({
            backdrop: true,
            keyboard: true,
            show: true,
        });
        $('#dialogEditVendor').on('hidden.bs.modal', function () {
            $('#modal-placeholder').empty();
        })
    });
    function modal_edit_Vendor_save() {
        var sendData = new Object();
        sendData.Operation = "Update";
        sendData.VendorId = $('#dialogEditVendorVendorId').val();
        sendData.Status = $('#dialogEditVendorStatus').val();
        sendData.Name = $('#dialogEditVendorName').val();
        sendData.Name2 = $('#dialogEditVendorNome2').val();
        sendData.VatNumber = $('#dialogEditVendorPIva').val();
        sendData.FiscalCode = $('#dialogEditVendorCFis').val();
        sendData.Address = $('#dialogEditVendorAddress').val();
        sendData.Address1 = $('#dialogEditVendorAddress1').val();
        sendData.PostalCode = $('#dialogEditVendorPostalCode').val();
        sendData.City = $('#dialogEditVendorCity').val();
        sendData.Province = $('#dialogEditVendorProvince').val();
        sendData.State = $('#dialogEditVendorState').val();
        sendData.Country = $('#dialogEditVendorCountry').val();
        $.ajax({
            method: "POST",
            url: '@Url.Content("~/api/VendorSvc")',
            data: JSON.stringify(sendData),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            error: function (response) {
                alert(response.responseText);
            },
            success: function (result) {
                if (result.ResultStatus == "OK") {
                    $('#dialogEditVendor').modal('hide');
                } else {

                    alert(result.Error + '\n' + result.ErrorMessage);
                }
            }
        });
    }
</script>
<style>
    .row-margin-6top {
        margin-top: 6px;
    }

    .modal-width-custom {
        width: 800px;
    }

    .divColText {
        position: relative;
        min-height: 1px;
        float: left;
        width: 120px;
        padding-left: 8px;
        height: 34px;
        line-height: 34px;
        margin: auto;
        font-weight: 500;
    }

    .divColField {
        position: relative;
        min-height: 1px;
        float: left;
        width: 600px;
    }
</style>
<div id="dialogEditVendor" class="modal fade modal-width-custom " role="dialog" aria-labelledby="modal_edit_Vendor" aria-hidden="true">
    <form class="modal-content">
        <div class="modal-header">
            Creazione/Modifica cliente
        </div>
        <div class="modal-body">
            <input type="hidden" value="@Html.Raw(Model.Vendor.VendorId.ToString())" id="dialogEditVendorVendorId" name="dialogEditVendorVendorId" />
            <div class="row row-margin-6top">
                <div class="divColText">Nome :</div>
                <div class="divColField">
                    @Html.TextBox("dialogEditVendorName", Model.Vendor.Name, new { @class = "form-control", @placeholder = "Cognome / Ragione sociale" })
                </div>
            </div>
            <div class="row row-margin-6top">
                <div class="divColText">&nbsp;</div>
                <div class="divColField">@Html.TextBox("dialogEditVendorNome2", Model.Vendor.Name2, new { @class = "form-control", @placeholder = "Nome / Ragione sociale" })</div>
            </div>
            <div class="row row-margin-6top">
                <div class="divColText">Partita IVA :</div>
                <div class="divColField" style="width:240px;">@Html.TextBox("dialogEditVendorPIva", Model.Vendor.VATNumber, new { @class = "form-control", @placeholder = "Partita IVA" })</div>
                <div class="divColText">Codice fiscale :</div>
                <div class="divColField" style="width:240px;"> @Html.TextBox("dialogEditVendorCFis", Model.Vendor.FiscalCode, new { @class = "form-control", @placeholder = "Codice fiscale" })</div>
            </div>
            <div class="row row-margin-6top">
                <div class="divColText">Indirizzo :</div>
                <div class="divColField">@Html.TextBox("dialogEditVendorAddress", Model.Vendor.Address, new { @class = "form-control", @placeholder = "Indirizzo" })</div>
            </div>
            <div class="row row-margin-6top">
                <div class="divColText">&nbsp;</div>
                <div class="divColField">@Html.TextBox("dialogEditVendorAddress1", Model.Vendor.Address1, new { @class = "form-control", @placeholder = "Indirizzo" })</div>
            </div>
            <div class="row row-margin-6top">
                <div class="divColText">&nbsp;</div>
                <div class="divColField" style="width:80px;">@Html.TextBox("dialogEditVendorPostalCode", Model.Vendor.PostalCode, new { @class = "form-control", @placeholder = "CAP" })</div>
                <div class="divColField" style="width:430px;padding-left:8px;">@Html.TextBox("dialogEditVendorCity", Model.Vendor.City, new { @class = "form-control", @placeholder = "Città" })</div>
                <div class="divColField" style="width:80px;padding-left:8px;">@Html.TextBox("dialogEditVendorProvince", Model.Vendor.Province, new { @class = "form-control", @placeholder = "Provincia" })</div>
            </div>
            <div class="row row-margin-6top">
                <div class="divColText">&nbsp;</div>
                <div class="divColField">@Html.TextBox("dialogEditVendorState", Model.Vendor.State, new { @class = "form-control", @placeholder = "Stato" })</div>
            </div>
            <div class="row row-margin-6top">
                <div class="divColText">&nbsp;</div>
                <div class="divColField">@Html.TextBox("dialogEditVendorCountry", Model.Vendor.Country, new { @class = "form-control", @placeholder = "Nazione" })</div>
            </div>
            <div class="row row-margin-6top">
                <div class="divColText">Status</div>
                <div class="divColField"><select id="dialogEditVendorStatus" name="dialogEditVendorStatus" class="form-control"><option value="0" @Html.Raw((Model.Vendor.Status == JobManagement.EFDataModel.Vendors.STATUS_ACTIVE ? "selected" : string.Empty))>ATTIVO</option><option value="1" @Html.Raw((Model.Vendor.Status == JobManagement.EFDataModel.Vendors.STATUS_ARCHIVED ? "selected" : string.Empty))>ARCHIVIATO</option></select></div>
            </div>
        </div>
        <div class="modal-footer">
            <div class="btn-group">
                <button class="btn btn-danger" type="button" data-dismiss="modal">
                    <i class="fa fa-times"></i> Annulla
                </button>
                <button class="btn btn-success" id="dialogEditVendor_confirm" type="button" onclick="modal_edit_Vendor_save();">
                    <i class="fa fa-check"></i> Salva
                </button>
            </div>
        </div>
    </form>
</div>

